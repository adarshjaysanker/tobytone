<!DOCTYPE HTML>
<html lang="en">


<!-- Mirrored from wp.alithemes.com/html/evara/evara-backend/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 01 Aug 2021 15:32:35 GMT -->
<head>
    <meta charset="utf-8">
    <title>tobytone-adminpanel</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title" content="">
    <meta property="og:type" content="">
    <meta property="og:url" content="">
    <meta property="og:image" content="">
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="/adminassets/imgs/theme/favicon.svg">
    <!-- Template CSS -->
    <link href="/adminassets/css/main.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .main-header{
            background: linear-gradient(to right, #73c8a9, black);
        }

        .aside-top{
            background-color: black;
        }

        .navbar-aside{
            background: linear-gradient(to right, #73c8a9, black);
        }

        .brand-wrap h3{
            color: white;
        }

        .content-title.card-title{
            color: black;
        }

        #dashboardtext{
            color: black;
            
        }

        .text{
            color: black;
            font-weight: bolder;
        }

        #menu-item-card{
            background-color: mediumseagreen;
        }

        .btn.btn-primary{
            background-color: black;
        }

        .card.card-body.mb-4{
            background-color: mediumseagreen;
        }

        .card.mb-4{
            background-color: mediumseagreen;
        }

        .card-header{
            background-color: black;
        }

        .logout-link {
             display: inline-block;
             padding: 10px 20px;
             background-color: #4caf50;
             color: white;
             text-decoration: none;
             border-radius: 4px;
             border: none;
             cursor: pointer;
             font-weight: bold;
         }

        .logout-link:hover {
            background-color: #45a049;
         }


        footer {
            background: linear-gradient(to right, #73c8a9, black);
            margin: 0;
            padding: 0;
        }

        footer.main-footer {
             bottom: -49px;
             padding: 26px 3%;
             position: absolute;
             right: 0;
             width: 100%;
             height: 84px;
         }

        table{
            border-collapse: collapse;
            margin-bottom: 20px;
            width: 100%;
            font-family: Arial, Helvetica, sans-serif;
        }
        
        th, td{
            border: 1px solid #dddddd;
            text-align: left;
            padding: 8px;
        }

        th{
            background-color: #f2f2f2;
            font-weight: bold;
        }

        tr :nth-child(even){
            background-color: #f2f2f2;
        }

        tr :hover{
            background-color: #e0e0e0;
        }
       
        
    </style>
</head>

<body>
    <div class="screen-overlay"></div>
    <aside class="navbar-aside" id="offcanvas_aside">
        <div class="aside-top">
            <a href="/admin/dashboard" class="brand-wrap"> <h3>TOBYTONE</h3> </a>
            <div>
                <a href="#" onclick="logout()" class="logout-link">Logout</a>
            </div>
        </div>
        <nav>
            <ul class="menu-aside">
                <li class="menu-item" id="menu-item-card">
                    <a class="menu-link" href="/admin/dashboard"> <i class="icon material-icons md-home"></i>
                        <span class="text"> <h4>Dashboard</h4></span>
                    </a>
                </li>
                <li class="menu-item" id="menu-item-card">
                    <a class="menu-link" href="/admin/allproducts"> <i class="icon material-icons md-shopping_bag"></i>
                        <span class="text"> <h4>Products</h4></span>
                    </a>
                </li>
                <li class="menu-item" id="menu-item-card">
                    <a class="menu-link" href="/admin/orderlist"> <i class="icon material-icons md-shopping_cart"></i>
                        <span class="text"> <h4>Orders</h4></span>
                    </a>
                    
                </li>
               
                    
               
                <li class="menu-item" id="menu-item-card">
                    <a class="menu-link" href="page-transactions-1.html"> <i class="icon material-icons md-monetization_on"></i>
                        <span class="text"> <h4> Transactions </h4></span>
                    </a>
                   
                </li>
                <li class="menu-item" id="menu-item-card">
                    <a class="menu-link" href="/admin/userlist"> <i class="icon material-icons md-person"></i>
                        <span class="text"> <h4>Users</h4></span>
                    </a>
                   
                </li>

                <li class="menu-item" id="menu-item-card">
                    <a class="menu-link" href="/admin/banner"> <i class="icon material-icons md-store"></i>
                        <span class="text"> <h4> Banner management </h4></span>
                    </a>
                   
                </li>
                <li class="menu-item" id="menu-item-card">
                    <a class="menu-link" href="/admin/coupon">  <i class="icon material-icons md-local_offer"></i></i>
                        <span class="text"> <h4> Coupon Management </h4></span>
                    </a>
                   
                </li>
                
               
                <li class="menu-item" id="menu-item-card">
                    <a class="menu-link" href="/admin/sales"> <i class="icon material-icons md-pie_chart"></i>
                        <span class="text"> <h4>Sales Report</h4></span>
                    </a>
                </li>
               
            </ul>
            <hr>
           
            <br>
            <br>
        </nav>
    </aside>
    <main class="main-wrap">
        <header class="main-header navbar">
            <div id="dashboardtext">
                <h2 class="content-title card-title">DASHBOARD</h2>
                <p>Whole data about your business here</p>
            </div>
            <div class="col-search">
                
            </div>
            
        </header>
        <section class="content-main">
            <div class="content-header">
                
                <div>
                    <a href="#" class="btn btn-primary"><i class="text-muted material-icons md-post_add"></i>Create report</a>
                </div>
            </div>
            
                
            <!-- Add these cards inside your <section class="content-main"> -->
<div class="row">
    <div class="col-xl-4 col-lg-6">
      <div class="card mb-4">
        <div class="card-body">
          <h5 class="card-title">Total Orders</h5>
          <h2 class="card-text"><%=totalOrders%></h2>
          <h5>shipping fees are not included.</h5>
        </div>
      </div>
    </div>
    <div class="col-xl-4 col-lg-6">
      <div class="card mb-4">
        <div class="card-body">
          <h5 class="card-title">Total Revenue</h5>
          <h2 class="card-text"><%=totalRevenue%></h2>
          <h5>excluding orders in transit</h5>
        </div>
      </div>
    </div>
    <div class="col-xl-4 col-lg-6">
        <div class="card mb-4">
          <div class="card-body">
            <h3 class="card-title"><h3 class="card-text"><%=totalProducts%></h3> Products in <h3><%=totalCategories%></h3> Categories</h3>
           
          </div>
        </div>
      </div>
  </div>
  
                
            </div>
            <div class="row">
               
                <div class="col-xl-8 col-lg-12">
                    <div class="card mb-4">
                        <article class="card-body">
                            <h5 class="card-title">Number Of Orders In Monthwise</h5>
                            <canvas id="salesChart" width="400" height="200" ></canvas>

                        </article>
                       
                                
                    </div>
                   
            
                </div>
            </div>

            <h3>Monthly Revenue Report</h3>
            <table>
                <tr>
                    <th>Month</th>
                    <th>Total Revenue</th>
                </tr>
                <%finalResult.forEach(result=>{%>
                <tr>
                    <td><%=result.month%></td>
                    <td><%=result.revenue%></td>
                </tr>
                <%})%>
            </table>
            
            
            
            
            
            
            
            
        </section> <!-- content-main end// -->
        <footer class="main-footer font-xs">
            <div class="row pb-30 pt-15">
                <div class="col-sm-6">
                    <script>
                    document.write(new Date().getFullYear())
                    </script> Â©, Evara - HTML Ecommerce Template .
                </div>
                <div class="col-sm-6">
                    <div class="text-sm-end">
                        All rights reserved
                    </div>
                </div>
            </div>
        </footer>
    </main>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="adminassets/js/vendors/jquery-3.6.0.min.js"></script>
    <script src="adminassets/js/vendors/bootstrap.bundle.min.js"></script>
    <script src="adminassets/js/vendors/select2.min.js"></script>
    <script src="adminassets/js/vendors/perfect-scrollbar.js"></script>
    <script src="adminassets/js/vendors/jquery.fullscreen.min.js"></script>
    <script src="adminassets/js/vendors/chart.js"></script>
    <!-- Main Script -->
    <script src="adminassets/js/main.js" type="text/javascript"></script>
    <script src="adminassets/js/custom-chart.js" type="text/javascript"></script>

    <script>
        function logout(){
            fetch('/admin/logout',{
                method : 'POST',
                credentials : 'same-origin'

            })
            .then(response=>{
                if(response.ok){
                    window.location.href = '/admin';
                }else{
                    console.error('logout failed');
                }
            })
            .catch(error=>{
                console.error('logout failed',error);
            })
        }
    </script>

<!-- 
   <script>

    

    async function fetchDailyOrders(){
        try{
            const response = await fetch('/dailyorders');
            const data = await response.json();
            return data;
        }catch(err){
            console.error('error fetching daily orders',err);
        }
    }

    async function updateChart(){
        const date = await fetchDailyOrders();
        const ctx = document.getElementById('salesChart').getContext('2d');

        const config = {
  type: 'bar',
  data: data,
  options: {
    scales: {
      y: {
        beginAtZero: true
      }
    }
  },
};
        

        data: {
    datasets: [{
        barPercentage: 0.5,
        barThickness: 6,
        maxBarThickness: 8,
        minBarLength: 2,
        data: [10, 20, 30, 40, 50, 60, 70]
    }]
};
        
        
    }
   </script> -->

   <script>
 const finalResult = JSON.parse('<%- JSON.stringify(finalResult) %>')
console.log(finalResult);

 const ctx = document.getElementById('salesChart');

 const axis=[]
 const month=[]
finalResult.map(item=>{
    axis.push(item.count)

 })
 finalResult.map(item=>{
    month.push(item.month)

 })


 

new Chart(ctx, {
  type: 'bar',
  data: {
    labels: month,
    datasets: [{
      label: '# of Votes',
      data: axis,
      borderWidth: 1
    }]
  },
  options: {
    scales: {
      y: {
        beginAtZero: true
      }
    }
  }
});
   </script>




</body>


<!-- Mirrored from wp.alithemes.com/html/evara/evara-backend/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 01 Aug 2021 15:32:57 GMT -->
</html>